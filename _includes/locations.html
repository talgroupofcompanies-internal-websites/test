<!-- LOCATIONS -->
<style>
  /* Section spacing */
  #locations {
    padding: 4rem 0;
  }
  #locations h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--primary);
  }

  /* Map container */
  #locations-map {
    height: 400px;
    width: 100%;
    border-radius: var(--border-radius);
    margin-bottom: 2rem;
  }

  /* Centered, responsive grid for location names */
  #locations .areas {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 0 auto;     /* center the whole grid */
    padding: 0;
    list-style: none;
    width: 100%;
    max-width: 800px;   /* optional max width to match map */
    text-align: center;
  }
  #locations .areas li {
    margin-bottom: 0.75rem;
  }
  #locations .areas li i {
    color: var(--accent);
    margin-right: 0.5rem;
  }
</style>

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
/>
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>

<section id="locations">
  <div class="container">
    <h2>Service Areas</h2>

    <!-- Map -->
    <div id="locations-map"></div>

    <!-- Locations list -->
    <ul class="areas">
      {% for loc in site.locations %}
        <li>
          <i class="fas fa-map-marker-alt"></i>{{ loc.name }}
        </li>
      {% endfor %}
    </ul>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const coords = [
      {% for loc in site.locations %}
        [{{ loc.coordinates }}]{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ];

    const map = L.map("locations-map").setView(coords[0], 11);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "&copy; OpenStreetMap contributors"
    }).addTo(map);

    coords.forEach(c => L.marker(c).addTo(map));
  });
</script>
